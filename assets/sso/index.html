<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Will.IAM SSO</title>
  </head>
  <body>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const accessToken = urlParams.get('accessToken')
        || localStorage.getItem('accessToken');
      const referer = urlParams.get('referer');
      if (accessToken) {
        const referer = urlParams.get('referer')
        localStorage.setItem('accessToken', accessToken);
        window.location.href = '/sso/auth/valid?accessToken='
          + encodeURIComponent(accessToken) + '&referer='
        + encodeURIComponent(referer);
      } else {
        window.location.href = '/sso/auth/do?referer=' + encodeURIComponent(referer);
      }
    </script>
  </body>
</html>
